<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday ‚ú®</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#fff0f6;
      --accent:#ff6fa3;
      --lid:#ff4f8d;
      --ribbon:#ffffff;
      --text:#6b4052;
      --card-shadow: 0 14px 28px rgba(0,0,0,0.13);
    }
    *{box-sizing:border-box}
    html,body{
      height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto;
      background:linear-gradient(180deg,#ffeef6,#fff0f6);
      color:var(--text);
      display:flex;align-items:center;justify-content:center;padding:18px;overflow:hidden;
    }
    .wrap{width:100%;max-width:980px;text-align:center;padding-bottom:30px}
    h1{font-family:'Fredoka One',cursive;color:var(--accent);font-size:2.1rem;margin:6px 0 6px}
    p{margin:0 0 18px;color:#8f5a6f;font-weight:600}

    /* balloons (background, not blocking) */
    .balloons{position:absolute;inset:0;pointer-events:none;z-index:1}
    .balloon{position:absolute;bottom:-120px;width:54px;height:74px;border-radius:50%/60% 60% 40% 40%;box-shadow:inset -6px -10px rgba(0,0,0,0.08);animation:floatUp linear infinite}
    .balloon::after{content:'';position:absolute;left:50%;transform:translateX(-50%);width:2px;height:40px;background:rgba(0,0,0,0.12);top:62px;border-radius:2px}
    @keyframes floatUp{0%{transform:translateY(0)}100%{transform:translateY(-120vh)}}
    .balloons.paused .balloon{animation-play-state:paused;opacity:0;transition:opacity 600ms ease}

    /* gift area */
    .gift-wrap{display:flex;justify-content:center;align-items:center;margin-top:4vh;z-index:2;position:relative}
    .gift{
      width:230px;height:230px;position:relative;cursor:pointer;perspective:900px;display:inline-block;outline:none;
      -webkit-tap-highlight-color: transparent;
    }

    /* bottom box */
    .box{
      width:100%;height:100%;
      background:var(--accent);
      border-radius:12px;
      box-shadow:var(--card-shadow);
      position:absolute;bottom:0;z-index:1;overflow:hidden;
      display:flex;align-items:center;justify-content:center;
    }

    /* vertical ribbon sits visually centered and is a bit thicker */
    .ribbon-vert{
      position:absolute;
      left:50%;top:0;bottom:0;
      width:44px; /* increased width for visible ribbon */
      background:var(--ribbon);
      transform:translateX(-50%);
      border-radius:6px;
      z-index:2;
      box-shadow:inset 0 -6px rgba(0,0,0,0.04);
    }

    /* lid (on top) - lid includes horizontal ribbon and bow */
    .lid{
      width:102%; /* slightly wider to cover edges and look natural */
      left:-1%;
      height:68px;
      background:var(--lid);
      position:absolute;top:-4px;
      border-radius:12px 12px 6px 6px;
      transform-origin:bottom center;
      transition:transform 920ms cubic-bezier(.22,.9,.3,1);
      box-shadow:0 10px 22px rgba(0,0,0,0.12);
      z-index:4;
      border:6px solid rgba(0,0,0,0.04);
      overflow:visible;
    }

    /* horizontal ribbon attached to lid (thicker, symmetric) */
    .ribbon-horiz{
      position:absolute;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:92%;
      height:38px; /* thicker ribbon */
      background:var(--ribbon);
      border-radius:8px;
      box-shadow:inset 0 -6px rgba(0,0,0,0.04);
      z-index:5;
    }

    /* bow sits on lid, centered; improved shape */
    .bow{
      position:absolute;left:50%;top:-12px;transform:translateX(-50%);display:flex;gap:6px;z-index:6;
      height:36px;align-items:center;justify-content:center;
    }
    .bow .loop{
      width:34px;height:34px;border-radius:50% 50% 50% 12%;background:var(--ribbon);
      transform-origin:center;box-shadow:inset 0 -6px rgba(0,0,0,0.06);
    }
    .bow .knot{
      width:22px;height:22px;border-radius:4px;background:var(--ribbon);box-shadow:inset 0 -4px rgba(0,0,0,0.06);
      transform:translateY(2px);
    }

    /* lid open transform */
    .gift.open .lid{
      transform:rotateX(160deg) rotateZ(-14deg) translateY(-24px) translateZ(0);
    }
    /* bow moves with lid because it is inside the lid element */
    .gift.open .lid .bow{ /* slight extra tilt if desired */ transform:translateX(-50%) rotate(-6deg); }

    /* hint text */
    .hint{margin-top:14px;color:#9b6277;font-weight:600;z-index:2;position:relative}

    /* video reveal slides up from box interior */
    .video-wrap{
      margin-top:18px;display:none;justify-content:center;z-index:3;position:relative;
      flex-direction:column;align-items:center;
      opacity:0;transform:translateY(48px);
      transition:opacity .9s ease, transform .9s ease;
    }
    .video-wrap.show{display:flex;opacity:1;transform:translateY(0)}
    .video-iframe{
      width:92%;max-width:820px;height:52vw;max-height:520px;border-radius:12px;border:0;
      box-shadow:0 18px 48px rgba(0,0,0,0.12);z-index:3;background:#000;
    }

    /* actions (download) - keep centered, responsive */
    .actions{margin-top:16px;display:flex;justify-content:center;z-index:3;flex-wrap:wrap;gap:12px}
    .btn{
      padding:10px 16px;border-radius:12px;border:0;
      background:linear-gradient(90deg,var(--accent),#ff3d8b);
      color:white;font-weight:700;cursor:pointer;text-decoration:none;display:inline-block;
      box-shadow:0 8px 24px rgba(255,105,180,0.12);
    }
    .link-muted{padding:10px 14px;border-radius:12px;border:1px solid rgba(0,0,0,0.06);background:white;color:#7a4d63;font-weight:700;text-decoration:none}

    @media(max-width:880px){
      .gift{width:170px;height:170px}
      .lid{height:56px}
      .ribbon-vert{width:36px}
      .ribbon-horiz{height:32px}
      .bow .loop{width:28px;height:28px}
      .video-iframe{height:56vw;max-height:360px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Happy Birthday, Kunji! üíñ</h1>
    <p>Here‚Äôs a little surprise waiting inside the gift box, Hope you like it üéÅ</p>

    <!-- decorative balloons -->
    <div class="balloons" id="balloons">
      <div class="balloon" style="left:6%;background:#ff6fa3;animation-duration:9s;animation-delay:0s"></div>
      <div class="balloon" style="left:22%;background:#f5a623;animation-duration:10s;animation-delay:1.2s"></div>
      <div class="balloon" style="left:42%;background:#7ed321;animation-duration:11s;animation-delay:0.6s"></div>
      <div class="balloon" style="left:62%;background:#50e3c2;animation-duration:9.6s;animation-delay:2.0s"></div>
      <div class="balloon" style="left:82%;background:#bd10e0;animation-duration:12s;animation-delay:1.0s"></div>
    </div>

    <!-- gift -->
    <div class="gift-wrap">
      <div class="gift" id="gift" role="button" tabindex="0" aria-label="Open gift">
        <div class="lid" id="lid">
          <div class="ribbon-horiz"></div>
          <div class="bow">
            <div class="loop"></div>
            <div class="knot"></div>
            <div class="loop"></div>
          </div>
        </div>

        <div class="box">
          <div class="ribbon-vert"></div>
        </div>
      </div>
    </div>

    <div class="hint" id="hint">Tap the gift to open it üéÅ‚ú®</div>

    <!-- video + download -->
    <div class="video-wrap" id="videoWrap" aria-hidden="true">
      <iframe id="drivePlayer" class="video-iframe" src="" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen></iframe>

      <div class="actions" id="actions" style="display:none">
        <a id="downloadBtn" class="btn" href="#" target="_blank" rel="noopener">‚¨áÔ∏è Download Video</a>
        <a id="openDrive" class="link-muted" href="#" target="_blank" rel="noopener">Open in Drive</a>
      </div>
    </div>
  </div>

<script>
  // CONFIG: your drive file id from earlier
  const DRIVE_FILE_ID = "1K4eSyBg9_yUMyxKIgUhBN0c8zx1GSXE2";

  // nodes
  const gift = document.getElementById('gift');
  const lid = document.getElementById('lid');
  const videoWrap = document.getElementById('videoWrap');
  const drivePlayer = document.getElementById('drivePlayer');
  const hint = document.getElementById('hint');
  const actions = document.getElementById('actions');
  const downloadBtn = document.getElementById('downloadBtn');
  const openDrive = document.getElementById('openDrive');
  const balloons = document.getElementById('balloons');

  function hasAccess(){
    try { return sessionStorage.getItem('portal_unlocked') === '1'; }
    catch(e){ return false; }
  }

  function denyAccess(){
    hint.textContent = "Oops ‚Äî you need to login at the Portal first ‚ù§Ô∏è";
    gift.style.pointerEvents = 'none';
    gift.style.opacity = 0.7;
    if(balloons) balloons.classList.add('paused');
  }

  function openGift(){
    if(gift.classList.contains('open')) return;
    gift.classList.add('open');

    // pause/fade balloons
    if(balloons) balloons.classList.add('paused');

    // reveal video after lid tilt
    setTimeout(()=> {
      drivePlayer.src = `https://drive.google.com/file/d/${DRIVE_FILE_ID}/preview`;
      videoWrap.classList.add('show');
      videoWrap.setAttribute('aria-hidden','false');

      // show actions and links
      downloadBtn.href = `https://drive.google.com/uc?export=download&id=${DRIVE_FILE_ID}`;
      openDrive.href = `https://drive.google.com/file/d/${DRIVE_FILE_ID}/view`;
      actions.style.display = 'flex';

      hint.textContent = "Enjoy your surprise üíï";

      // clear session flag so refresh won't auto-open again (optional)
      try { sessionStorage.removeItem('portal_unlocked'); } catch(e){}
    }, 920);
  }

  // click & keyboard
  gift.addEventListener('click', ()=>{
    if(!hasAccess()){ denyAccess(); return; }
    openGift();
  });
  gift.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' || e.key === ' '){
      e.preventDefault();
      if(!hasAccess()){ denyAccess(); return; }
      openGift();
    }
  });

 // only check access, don‚Äôt auto-open
window.addEventListener('load', ()=>{
  if(!hasAccess()){
    setTimeout(()=> denyAccess(), 300);
  }
});

</script>
</body>
</html>
